I will upgrade the email template system to a **"Layout + Content" Builder** model, replacing the raw HTML editing with a professional, user-friendly interface.

### **Core Changes**
1.  **Database Update**:
    *   Add a `design_metadata` (JSONB) column to the `email_templates` table.
    *   This will store the structured content (Headline, Body, Button Text) and the selected Layout ID, allowing admins to edit "literature" without touching raw HTML.

2.  **Frontend Redesign (`AdminEmailTemplates.tsx`)**:
    *   **Layout Selector**: Admins can choose from pre-defined professional styles:
        *   **Modern Bright** (Default): Clean white background, subtle typography, no dark headers/footers.
        *   **Corporate Clean**: Light gray background, centered white card, professional borders.
        *   **Minimalist**: Simple, text-focused design.
    *   **Content Editor**: Replace the raw HTML textarea with user-friendly fields:
        *   **Headline**: The main greeting/title.
        *   **Body Content**: The main message text.
        *   **Call to Action**: Button text and link.
        *   **Footer**: Custom footer text.
    *   **Live Preview**: Real-time visualization of the selected layout and content.

3.  **Backend Logic (`email-service.ts`)**:
    *   Update the `send-email` Edge Function to handle "Full HTML" templates.
    *   If a template is generated by the new builder (containing `<html>` tags), it will be sent as-is, preserving the professional layout.
    *   Legacy templates (partial HTML) will still be wrapped in a default container for backward compatibility.

### **Implementation Steps**
1.  **Database**: Create a migration to add `design_metadata` to `email_templates`.
2.  **Edge Function**: Update `email-service.ts` to intelligently handle full vs. partial HTML templates.
3.  **Frontend**:
    *   Create the `EmailLayouts` library with the new "Clean Bright" designs.
    *   Rebuild `AdminEmailTemplates.tsx` to include the Layout Selector and Content Form.
    *   Integrate the "Send Test Email" feature with the new builder logic.
